<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ø¨Ù„Ø§Ú¯ Ù¾ÙˆÛŒØ§</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Arial', sans-serif; direction: rtl; }
    .test-pass { color: green; }
    .test-fail { color: red; }
  </style>
</head>
<body class="bg-gray-900 text-white p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-8">ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ø¨Ù„Ø§Ú¯ Ù¾ÙˆÛŒØ§</h1>
    
    <div id="testResults" class="space-y-4">
      <div id="loadingTest" class="text-yellow-400">ğŸ”„ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª Ø³ÛŒØ³ØªÙ…...</div>
    </div>

    <div class="mt-8">
      <h2 class="text-2xl font-bold mb-4">Ù†ØªØ§ÛŒØ¬:</h2>
      <div id="results" class="space-y-2"></div>
    </div>

    <div class="mt-8">
      <h2 class="text-2xl font-bold mb-4">Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§:</h2>
      <div class="space-x-4">
        <a href="blog-dynamic.html" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded">Ø¨Ù„Ø§Ú¯ Ù¾ÙˆÛŒØ§</a>
        <a href="blog.html" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded">Ø¨Ù„Ø§Ú¯ Ø§Ø³ØªØ§ØªÛŒÚ© (Ù‚Ø¯ÛŒÙ…ÛŒ)</a>
      </div>
    </div>
  </div>

  <script>
    async function runTests() {
      const results = [];
      
      // Test 1: JSON file exists and is valid
      try {
        const response = await fetch('articles.json');
        const articles = await response.json();
        
        if (Array.isArray(articles) && articles.length > 0) {
          results.push({ test: 'Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ articles.json', status: 'success', message: `âœ… ${articles.length} Ù…Ù‚Ø§Ù„Ù‡ ÛŒØ§ÙØª Ø´Ø¯` });
        } else {
          results.push({ test: 'Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ articles.json', status: 'fail', message: 'âŒ ÙØ§ÛŒÙ„ JSON Ø®Ø§Ù„ÛŒ ÛŒØ§ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª' });
        }
      } catch (error) {
        results.push({ test: 'Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ articles.json', status: 'fail', message: 'âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ§ÛŒÙ„ JSON' });
      }

      // Test 2: JavaScript files exist
      try {
        await fetch('js/blog-dynamic.js');
        results.push({ test: 'ÙØ§ÛŒÙ„ blog-dynamic.js', status: 'success', message: 'âœ… ÙØ§ÛŒÙ„ JavaScript Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª' });
      } catch (error) {
        results.push({ test: 'ÙØ§ÛŒÙ„ blog-dynamic.js', status: 'fail', message: 'âŒ ÙØ§ÛŒÙ„ JavaScript ÛŒØ§ÙØª Ù†Ø´Ø¯' });
      }

      // Test 3: HTML file structure
      try {
        const response = await fetch('blog-dynamic.html');
        const html = await response.text();
        
        if (html.includes('articlesContainer') && html.includes('blog-dynamic.js')) {
          results.push({ test: 'Ø³Ø§Ø®ØªØ§Ø± HTML', status: 'success', message: 'âœ… HTML Ø´Ø§Ù…Ù„ container Ùˆ script Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª' });
        } else {
          results.push({ test: 'Ø³Ø§Ø®ØªØ§Ø± HTML', status: 'fail', message: 'âŒ HTML Ø´Ø§Ù…Ù„ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ù†ÛŒØ³Øª' });
        }
      } catch (error) {
        results.push({ test: 'Ø³Ø§Ø®ØªØ§Ø± HTML', status: 'fail', message: 'âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙØ§ÛŒÙ„ HTML' });
      }

      // Test 4: GitHub Pages compatibility
      const isLocal = window.location.protocol === 'file:';
      if (isLocal) {
        results.push({ test: 'Ù…Ø­ÛŒØ· Ø§Ø¬Ø±Ø§', status: 'warn', message: 'âš ï¸ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ú©Ø§Ù…Ù„ØŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø±ÙˆÛŒ GitHub Pages Ù…Ù†ØªØ´Ø± Ú©Ù†ÛŒØ¯' });
      } else {
        results.push({ test: 'Ù…Ø­ÛŒØ· Ø§Ø¬Ø±Ø§', status: 'success', message: 'âœ… Ù…Ø­ÛŒØ· Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ fetch() Ø§Ø³Øª' });
      }

      displayResults(results);
    }

    function displayResults(results) {
      document.getElementById('loadingTest').style.display = 'none';
      
      const resultsContainer = document.getElementById('results');
      resultsContainer.innerHTML = '';

      results.forEach(result => {
        const div = document.createElement('div');
        div.className = `p-3 rounded ${result.status === 'success' ? 'bg-green-900' : result.status === 'warn' ? 'bg-yellow-900' : 'bg-red-900'}`;
        div.innerHTML = `<span class="${result.status === 'success' ? 'test-pass' : result.status === 'warn' ? 'text-yellow-400' : 'test-fail'}">${result.message}</span>`;
        resultsContainer.appendChild(div);
      });

      const successCount = results.filter(r => r.status === 'success').length;
      const totalCount = results.length;
      
      const summary = document.createElement('div');
      summary.className = 'mt-6 p-4 bg-gray-800 rounded';
      summary.innerHTML = `
        <h3 class="text-xl font-bold">Ø®Ù„Ø§ØµÙ‡ ØªØ³Øª:</h3>
        <p class="text-lg">ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙÙ‚: <span class="text-green-400">${successCount}</span> Ø§Ø² <span class="text-white">${totalCount}</span></p>
        ${successCount === totalCount ? 
          '<p class="text-green-400 mt-2">ğŸ‰ Ø³ÛŒØ³ØªÙ… Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª!</p>' : 
          '<p class="text-yellow-400 mt-2">âš ï¸ Ø¨Ø±Ø®ÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯.</p>'
        }
      `;
      resultsContainer.appendChild(summary);
    }

    // Run tests when page loads
    document.addEventListener('DOMContentLoaded', runTests);
  </script>
</body>
</html>